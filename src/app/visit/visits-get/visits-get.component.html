<div>
  <app-header></app-header>
  <!-- Page Content Holder -->
  <div id="content">
    <nav class="navbar navbar-default" style="padding: 0; text-align: left;">
        <div class="container-fluid" style="padding: 0;">
            <div class="navbar-header">
                <button type="button" id="sidebarCollapse" (click)="handleClick($event)" class="btn btn-info navbar-btn">
                  <i class="fa fa-bars"></i>
                </button>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#">Page</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <h2 style="color: #566089; display:inline;">Λίστα Επισκέψεων</h2>
    <button (click)="createVisit()" type="button" class="btn btn-primary" style="float: right;">
      Δημιουργία Επίσκεψης
    </button>
    <br>
    <br>
    <table class="table" style="color: #107dd0">
      <thead>
      <tr style="color: #eb201e">
        <th scope="col">ΑΜΚΑ Ασθενή</th>
        <th scope="col">Ονοματεπώνυμο</th>
        <th scope="col">Ημερομηνία</th>
        <th scope="col">Κατάσταση</th>
        <th scope="col">Δράση</th>
      </tr>
      </thead>
      <tbody>
      <ng-container *ngIf="!isFetching && visits.item.length >= 0">
        <ng-container *ngFor="let visit of visits.item">
          <tr>
            <td>{{visit.patientInfo.amka}}</td>
            <td>{{visit.patientInfo.firstName + ' ' + visit.patientInfo.lastName}}</td>
            <td>{{visit.startDate}}</td>
            <td>{{visit.status.status}}</td>
            <td>
              <button (click)="viewVisitDetails(visit.id)" class="btn btn-success" style="
              margin-right: 24px; margin-top: 5px; margin-bottom: 5px;">
                Δείτε<br>Περισσότερα
              </button>
              <br>
              <ng-container *ngIf="visit.status.status != 'Ακυρωμένη' && visit.status.status != 'Ολοκληρωμένη'">
                <button (click)="editVisit(visit.id)" class="btn btn-info" style="
                    margin-right: 24px; margin-top: 5px; margin-bottom: 5px;">
                  Επεξεργασία
                </button>
                <br>
              </ng-container>
              <ng-container *ngIf="visit.status.status != 'Ακυρωμένη' && visit.status.status != 'Ολοκληρωμένη'">
                <button (click)="openConfirmDeleteModal(visit.id)" class="btn btn-danger" style="
                    margin-right: 24px; margin-top: 5px; margin-bottom: 5px;">
                  Ακύρωση
                </button>
                <br>
              </ng-container>
            </td>
          </tr>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="isFetching">
        <div>
          <app-spinner class="main-loader"></app-spinner>
        </div>
      </ng-container>
      </tbody>
    </table>
  </div>
</div>
